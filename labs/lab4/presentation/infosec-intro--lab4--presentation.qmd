---
### Author
author:
  name: Накова Амина
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
## Title
title: Лабораторная работа 4
license: CC BY
date: today
date-format: "YYYY-MM-DD"
toc: false
---

# Вводная часть

## Цель работы

Получение практических навыков работы в консоли с расширенными атрибутами файлов.

# Ход работы

## Определение расширенных атрибутов

От имени пользователя guest определите расширенные атрибуты файла
/home/guest/dir1/file1 командой ([рис. @fig-001]).

![Определение расширенных атрибутов файла](image/1.png){#fig-001 width=70%}

## Установка прав доступа

Установлю командой chmod 600 file1 на файл file1 права, разрешающие чтение и запись для владельца файла ([рис. @fig-002]).

![Установка прав доступа на файл](image/2.png){#fig-002 width=70%}

## Попытка установки атрибута от пользователя

Попробую установить на файл /home/guest/dir1/file1 расширенный атрибут a от имени пользователя guest: chattr +a /home/guest/dir1/file1. В ответ вы должны получить отказ от выполнения операции ([рис. @fig-003]).

![Попытка установки атрибута пользователем](image/4.png){#fig-003 width=70%}

## Установка атрибута от администратора

Зайдите на третью консоль с правами администратора либо повышу свои права с помощью команды su. Попробуйте установить расширенный атрибут a на файл /home/guest/dir1/file1 от имени суперпользователя: chattr +a /home/guest/dir1/file1 ([рис. @fig-004]).

![Установка атрибута администратором](image/5.png){#fig-004 width=70%}

## Создание файла с установленным атрибутом

Попытаюсь создать в директории dir1 файл file1 командой echo "test" > /home/guest/dir1/file1. Проверю командой ls -l /home/guest/dir1 ([рис. @fig-005]).

![Создание файла с атрибутом](image/6.png){#fig-005 width=70%}

## Тестирование работы атрибута

От пользователя guest проверьте правильность установления атрибута: lsattr /home/guest/dir1/file1. Выполните дозапись в файл file1 слова «test» командой echo "test" /home/guest/dir1/file1. После этого выполните чтение файла file1 командой. cat /home/guest/dir1/file1. Убедитесь, что слово test было успешно записано в file1. Попробуйте удалить файл file1 либо стереть имеющуюся в нём информацию командой echo "abcd" > /home/guest/dirl/file1. Попробуйте переименовать файл. Попробуйте с помощью команды chmod 000 file1 установить на файл file1 права, например, запрещающие чтение и запись для владельца файла. Удалось ли вам успешно выполнить указанные команды? Снимите расширенный атрибут a с файла /home/guest/dirl/file1 от имени суперпользователя командой chattr -a /home/guest/dir1/file1. Повторите операции, которые вам ранее не удавалось выполнить. ([рис. @fig-006]).

![Тестирование работы атрибута](image/6.png){#fig-006 width=70%}

# Выводы

В ходе лабораторной работы были получены практические навыки работы с расширенными атрибутами файлов в Linux. На примерах было изучено действие двух ключевых атрибутов:

1. Атрибут a (append only): Разрешает только операцию дозаписи в конец файла. Любые другие операции, изменяющие содержимое файла (перезапись) или его метаданные (удаление, переименование), блокируются. Изменение базовых прав доступа (chmod) остается возможным.

2. Атрибут i (immutable): Делает файл полностью неизменяемым. Запрещаются все операции по изменению файла: запись (как дозапись, так и перезапись), удаление, переименование и изменение прав доступа. Это максимальный уровень защиты содержимого файла от изменений.

Было установлено, что для управления расширенными атрибутами необходимы права суперпользователя. Расширенные атрибуты являются мощным механизмом разграничения доступа, который действует на уровне файловой системы и применяется поверх классической дискреционной модели прав (права rwx). Это позволяет администратору установить более строгие ограничения, которые не могут быть обойдены простым изменением базовых прав доступа.